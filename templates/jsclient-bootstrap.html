<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CT: What have you done?</title>
    <link rel="stylesheet"  href="{{ url_for('static', filename='jquery.mobile-1.0b1.min.css') }}" />
    <link rel="stylesheet" style="text/css" href="{{ url_for('static', filename='jquery.mobile-1.0b1.css') }}">
    <link rel="stylesheet" style="text/css" href="{{ url_for('static', filename='jsclient.css') }}">
  </head> 
  <body> 
    <div data-role="page" id="day" class="type-home">
      <div data-role="header" data-bind="template: { name: 'headerTemplate' }"></div>
      <div data-role="content">
        <h2>Rapporterte aktiviteter</h2>
	<table class="activities">
	  <thead>
            <tr>
              <th class="col-name"><div class="liner">Navn</div></th>
              <th class="col-duration"><div class="liner">Timer</div></th>
              <th class="col-actions"><div class="liner">Valg</div></th>
            </tr>
	  </thead>
	  <tbody data-bind='template: { name: "activityTemplate", afterRender: postProcess, foreach: activities() }'></tbody>
	</table>
        <a href="#/add" data-role="button" data-icon="plus">Legg til</a>
	<button data-bind="click: ct.DayView.saveActivities">Lagre</button>
        <h2>Tilgjengelige aktiviteter</h2>
        <table class="activities">
          <thead>
            <tr>
              <th class="col-name"><div class="liner">Navn</div></th>
              <th class="col-duration"><div class="liner">Timer</div></th>
              <th class="col-actions"><div class="liner">Valg</div></th>
            </tr>
          </thead>
          <tbody data-bind='template: { name: "availableActivitiesTemplate", afterRender: postProcess, foreach: recentActivities() }'> </tbody>
	</table>
      </div>
      <div data-role="footer" class="footer" data-bind="template: { name: 'footerTemplate' }"></div>  
    </div>

    <div data-role="page" id="week">
      <div data-role="header" data-bind="template: { name: 'headerTemplate' }"></div>
      <div data-role="content">  
        Week has no content yet.
      </div>
      <div data-role="footer" class="footer" data-bind="template: { name: 'footerTemplate' }"></div>  
    </div>

    <div data-role="page" id="month">
      <div data-role="header" data-bind='template: { name: "headerTemplate" }'></div>
      <div data-role="content">
	<table>
	  <thead>
            <tr>
              <th>Uke</th>
              <th>M</th>
              <th>T</th>
              <th>O</th>
              <th>T</th>
              <th>F</th>
              <th>L</th>
              <th>S</th>
            </tr>
	  </thead>
	  <tbody data-bind='template: { name: "monthTemplate", foreach: activities() }'></tbody>
	</table>
      </div>
      <div data-role="footer" class="footer" data-bind="template: { name: 'footerTemplate' }"></div>  
    </div>

    <div data-role="page" id="edit">
      <div data-role="header" data-theme="e">
	<h1><span data-bind="text: title"></span></h1>
      </div>

      <div data-role="content" data-theme="d">	
	<form>
	  <fieldset>
	    <div>
	      <label for="project">Prosjekt</label>
	      <select name="project" data-bind="options: projects,
						optionsCaption: 'Velg...',
						optionsText: 'name',
						optionsValue: 'id',
						value: project_id">
	      </select>
	    </div>
	    <div>
	      <label for="duration">Timer</label>
	      <input name="duration" type="text" data-bind='value: duration, valueUpdate: "afterkeydown"' />
	    </div>
	    <div>
	      <label for="comment">Kommentar</label>
	      <textarea name="comment" data-bind='value: comment, valueUpdate: "afterkeydown"'></textarea>
	    </div>
	  </fieldset>
	  <button data-bind="click: add">Lagre</button>
	</form>
      </div>
      
      <div data-role="footer">
        <p>&copy; 2011 The CurrentTime Replacement Project</p>
      </div>
    </div>

    {% raw %}
    <script type="text/html" id="headerTemplate">
      <a href="#" data-bind="attr: { href: home }" data-role="button" data-icon="home" class="ui-btn-left">I dag</a>
      <h1><span data-bind="text: title"></span></h1>
      <div id="nav-bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
        <a href="#" data-bind="attr: { href: prev }" data-role="button" data-icon="arrow-l" data-iconpos="notext" alt="Forrige dag">&lt;</a>
        <a href="#" data-bind="attr: { href: next }" data-role="button" data-icon="arrow-r" data-iconpos="notext" alt="Neste dag">&gt;</a>
        <a href="#" data-bind="click: reload" data-role="button" data-icon="refresh" data-iconpos="notext" alt="Last data på nytt">↻</a>
      </div>
      <div data-role="navbar">
        <ul>
          <li><a href="#/day" class="ui-btn-active" data-role="button">Dag</a></li>
          <li><a href="#/week" data-role="button">Uke</a></li>
          <li><a href="#/month" id="monthButton" data-role="button">Måned</a></li>
        </ul>
      </div> 
    </script>
    <script type="text/html" id="footerTemplate">
    <p>&copy; 2011 The CurrentTime Replacement Project</p>
    </script>
    <script type="text/html" id="activityTemplate">
    <tr>
    <td class="col-name">
    <div class="liner">
    <a href="#"  data-bind="text: ct.getProjectShortName(id), attr: { href: ct.DayView.getEditUrl(id) }"></a>
    </div>
    </td>
    <td class="col-duration">
    <div class="liner">
    <input class="duration" data-bind='value: duration, valueUpdate: "afterkeydown"' />
    </div>
    </td>
    <td class="col-actions">
    <div class="liner">
    <button data-bind="click: function() { ct.DayView.removeActivity($data); }" data-role="button" data-icon="minus" data-iconpos="notext">Slett</button>
    </div>
    </td>
    </tr>
    </script>
    <script type="text/html" id="availableActivitiesTemplate">
    <tr>
    <td class="col-name">
    <div class="liner">
    <div data-bind="text: ct.getProjectShortName(id), attr: { title: ct.getProjectLongName(id) }"></div>
    </div>
    </td>
    <td class="col-duration">
    <div class="liner">
    <span class="duration" data-bind='text: duration' />
    </div>
    </td>
    <td class="col-actions">
    <div class="liner">
    <button data-bind="click: function() { ct.DayView.addRecentActivity($data); }" data-role="button" data-icon="plus" data-iconpos="notext">Legg til</button>
    </div>
    </td>
    </tr>
    </script>
    <script type="text/html" id="monthTemplate">
    <tr>
    <td>foo</td>
    <td>foo</td>
    <td>foo</td>
    <td>foo</td>
    <td>foo</td>
    <td>foo</td>
    <td>foo</td>
        <td>foo</td>
      </tr>
    </script>
    {% endraw %}

    <script src="{{ url_for('static', filename='jquery-1.6.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='underscore-min.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery.tmpl.min.js') }}"></script>
    <script src="{{ url_for('static', filename='knockout-1.2.1.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery.address-1.4.min.js') }}"></script>
    <script src="{{ url_for('static', filename='date-nb-NO.js') }}"></script>
    <script src="{{ url_for('static', filename='jsclient.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery.mobile-1.0b1.js') }}"></script>
  </body>
</html>

