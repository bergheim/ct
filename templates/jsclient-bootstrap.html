<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CT: What have you done?</title>
    <link rel="stylesheet"  href="http://code.jquery.com/mobile/1.0b1/jquery.mobile-1.0b1.min.css" />
    <link rel="stylesheet" style="text/css" href="{{ url_for('static', filename='jquery.mobile-1.0b1.css') }}">
    <link rel="stylesheet" style="text/css" href="{{ url_for('static', filename='jsclient.css') }}">
  </head> 
  <body> 
    <div data-role="page" id="jqm-home" class="type-home">
      <div data-role="header">
        <a href="#" data-bind="attr: { href: home }" data-role="button" data-icon="home" class="ui-btn-left">I dag</a>
        <h1><span data-bind="text: title"></span></h1>
        <div id="nav-bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
          <a href="#" data-bind="attr: { href: prev }" data-role="button" data-icon="arrow-l" data-iconpos="notext" alt="Forrige dag">&lt;</a>
          <a href="#" data-bind="attr: { href: next }" data-role="button" data-icon="arrow-r" data-iconpos="notext" alt="Neste dag">&gt;</a>
          <a href="#" data-bind="click: reload" data-role="button" data-icon="refresh" data-iconpos="notext" alt="Last data på nytt">↻</a>
        </div>
        <div data-role="navbar">
          <ul>
            <li><a href="#" class="ui-btn-active">Dag</a></li>
            <li><a href="#">Uke</a></li>
            <li><a href="#">Måned</a></li>
          </ul>
        </div> 
      </div>
      <div data-role="content">
        <h2>Rapporterte aktiviteter</h2>
	<table class="activities">
          <tr>
            <th>Navn</th>
            <th>Varighet</th>
            <th>Kommentar</th>
            <th>Valg</th>
          </tr>
	  <tbody data-bind='template: { name: "activityTemplate", afterRender: postProcess, foreach: activities() }'></tbody>
	</table>
	<button data-bind="click: ct.DayView.saveActivities">Lagre</button>

        <h2>Tilgjengelige aktiviteter</h2>
	<table class="activities">
          <tr>
            <th>Navn</th>
            <th>Varighet</th>
            <th>Kommentar</th>
            <th>Valg</th>
          </tr>
          <tbody data-bind='template: { name: "availableActivitiesTemplate", afterRender: postProcess, foreach: recentActivities() }'> </tbody>
	</table>
        <a href="index.html" data-role="button" data-icon="plus">Legg til prosjekt</a>
      </div>
      <div data-role="footer" class="footer">
        <p>&copy; 2011 The CurrentTime Replacement Project</p>
      </div>  
    </div>

    {% raw %}
    <script type="text/html" id="activityTemplate">
      <tr>
        <td><span data-bind="text: ct.getProjectName(id)"></span></td>
        <td><input class="duration" data-bind='value: duration, valueUpdate: "afterkeydown"' /></td>
        <td><textarea data-bind='value: comment, valueUpdate: "afterkeydown"'></textarea></td>
        <td><button data-bind="click: function() { ct.DayView.removeActivity($data); }" data-role="button" data-icon="minus" data-iconpos="notext">Slett</button></td>
      </tr>
    </script>
    <script type="text/html" id="availableActivitiesTemplate">
      <tr>
        <td><span data-bind="text: ct.getProjectName(id)"></span></td>
        <td><input class="duration" data-bind='value: duration, valueUpdate: "afterkeydown"' /></td>
        <td><textarea data-bind='value: comment, valueUpdate: "afterkeydown"'></textarea></td>
	<td><button data-bind="click: function() { ct.DayView.addRecentActivity($data); }" data-role="button" data-icon="plus" data-iconpos="notext">Legg til</button></td>
      </tr>
    </script>
    {% endraw %}

    <script src="{{ url_for('static', filename='jquery-1.6.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='underscore-min.js') }}"></script>
    <script src="{{ url_for('static', filename='jsclient.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery.address-1.4.min.js') }}"></script>
    <script src="{{ url_for('static', filename='date-nb-NO.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery.mobile-1.0b1.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery.tmpl.min.js') }}"></script>
    <script src="{{ url_for('static', filename='knockout-1.2.1.js') }}"></script>
  </body>
</html>

